{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../plugins/base/search/indico_search/client/index.js","webpack:///../plugins/base/search/indico_search/client/main.scss?93c7"],"names":["global","$t","$T","domain","type","_highlight","elem","token","idx","toLowerCase","indexOf","before","slice","after","length","Html","span","_truncateTitle","title","max","_showSuggestions","text","suggList","totalNumber","self","suggestionBox","WatchValue","suggestionList","ul","infoBox","div","gettext","style","position","top","pixels","left","className","$B","number","container","append","tokens","_","filter","escapeHTML","split","t","tokenRE","RegExp","join","counter","titleHtml","replace","index","dom","innerHTML","pathText","Util","truncateCategPath","path","liItem","li","observeEvent","selectorPos","_clearSelector","_setSelector","observeClick","window","location","url","set","_hideSuggestions","remove","suggestions","_retrieveOptions","expression","querying","$","ajax","searchUrl","data","term","dataType","complete","timeOfLastQuery","Date","getTime","success","handleAjaxError","results","count","currentText","trim","get","_textTyped","_getTimeSinceLastQuery","now","_waitForRequestTime","queuedRequest","setTimeout","key","_openSelection","event","_moveSelector","direction","suggNum","item","isAnyItemSelected","args","autocomplete","RealtimeTextBox","observe","observeOtherKeys","$E","document","body","ancestorOf","eventTarget","input","widget","options","categ_title","everywhere","search_category_url","search_url","form","_transition","no_check","$tag","old_width","width","fadeTo","find","html","new_width","animate","_create","tag_template","template","element","replaceWith","$where","addClass","hide","show","on","search_everywhere","$parent","parent","show_categ","e","show_tip","removeData","confirm_tip","back_to_everywhere","qtip","fadeOut","fadeIn","removeClass","attr","content","format","at","my","ready","categorySearchBox","extra","controls","extraConfigured","is","slideUp","slideDown","css","of","verifyForm","startDate","val","endDate","parseDateTime","IndicoDateTimeFormats","DefaultHourless","intelligentSearchBox","IntelligentSearchBox","name","id","backgroundColor","outline","categoryNamesUrl","datepicker","draw","submit","which","isRoot","search_tag","categoryName","searchCategoryUrl"],"mappings":"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","file":"js/main.1f687a96.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/static/plugins/search/dist/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./index.js\");\n","/* This file is part of Indico.\n * Copyright (C) 2002 - 2018 European Organization for Nuclear Research (CERN).\n *\n * Indico is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 3 of the\n * License, or (at your option) any later version.\n *\n * Indico is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with Indico; if not, see <http://www.gnu.org/licenses/>.\n */\n\nimport './main.scss';\n\n(function(global) {\n    var $t = $T.domain('search');\n\n    type('IntelligentSearchBox', ['RealtimeTextBox'], {\n        _highlight: function(elem, token) {\n            // Code for highlighting the matched part of the string\n            var idx = elem.toLowerCase().indexOf(token.toLowerCase());\n            if (idx >= 0) {\n                var before = elem.slice(0, idx);\n                var after = elem.slice(idx + token.length, elem.length);\n                return [before, Html.span('highlight', elem.slice(idx, idx + token.length)), after];\n            }\n        },\n\n        _truncateTitle: function(title) {\n            var max = 27;\n            if (title.length > max) {\n                return title.slice(0, max / 2) + ' ... ' + title.slice(-max / 2);\n            } else {\n                return title;\n            }\n        },\n\n        _showSuggestions: function(text, suggList, totalNumber) {\n            var self = this;\n            if (!this.suggestionBox) {\n                // Create the suggestion box only once\n\n                // totalNumber will change during time\n                this.totalNumber = new WatchValue(totalNumber);\n                this.suggestionList = Html.ul();\n\n                var infoBox = Html.div('help', $t.gettext(\"Some category suggestions...\"));\n\n                // Create the suggestion box\n                this.suggestionBox = Html.div({\n                    style: {\n                        position: 'absolute',\n                        top: pixels(23),\n                        left: 0\n                    },\n                    className: 'suggestion-box'\n                },\n                infoBox,\n                this.suggestionList,\n                $B(Html.div('other-results'), this.totalNumber, function(number) {\n                    return number === 0 ? '' : number + ' ' + $t.gettext('other results - please write more...');\n                }));\n\n                this.container.append(this.suggestionBox);\n            }\n\n            // Prepare regular expression for highlighting\n            var tokens = _.filter(escapeHTML(text).split(' '), function(t) {\n                return t !== '';\n            });\n            var tokenRE = new RegExp('(' + tokens.join('|') + ')', 'gi');\n\n\n            // Bind the list to the DOM element\n            var counter = 0;\n\n            $B(this.suggestionList, suggList, function(elem) {\n                var titleHtml = escapeHTML(self._truncateTitle(elem.title)).replace(tokenRE, '<span class=\"highlight\">$1</span>');\n                var index = counter;\n                var title = Html.span('title');\n                title.dom.innerHTML = titleHtml;\n                var pathText = Util.truncateCategPath(elem.path).join(' >> ');\n                var path = Html.div('path', pathText);\n                var liItem = Html.li({}, title, path);\n\n                // Use mouse to control selector as well\n\n                liItem.observeEvent('mouseover', function() {\n                    if (self.selectorPos != index) {\n                        self._clearSelector();\n                        self.selectorPos = index;\n                        self._setSelector();\n                    }\n                });\n\n                liItem.observeClick(function() {\n                    window.location = elem.url;\n                });\n\n                counter++;\n                return liItem;\n            });\n\n            this.suggestionList.observeEvent('mouseout', function() {\n                self._clearSelector();\n                self.selectorPos = -1;\n            });\n\n            // Update\n            this.totalNumber.set(totalNumber);\n        },\n\n        _hideSuggestions: function() {\n            this.container.remove(this.suggestionBox);\n            this.suggestionBox = null;\n            this.selectorPos = -1;\n            this.suggestions = null;\n        },\n\n        _retrieveOptions: function(expression) {\n            var self = this;\n            this.querying = true;\n\n            $.ajax({\n                url: self.searchUrl,\n                type: 'GET',\n                data: {\n                    term: expression\n                },\n                dataType: 'json',\n                complete: function() {\n                    self.querying = false;\n                    self.timeOfLastQuery = (new Date()).getTime();\n                },\n                success: function(data) {\n                    if (handleAjaxError(data)) {\n                        return;\n                    }\n\n                    if (data.results.length) {\n                        self.suggestions = data.results;\n                        self._showSuggestions(expression, data.results, data.count - data.results.length);\n                    } else {\n                        self._hideSuggestions();\n                    }\n\n                    var currentText = trim(self.get());\n\n                    // if the text changed meanwhile and it\n                    // is still long enough\n                    if (currentText != expression && currentText.length > 1) {\n                        // request\n                        self._textTyped();\n                    } else if (currentText.length <= 1) {\n                        // if it is not long enough\n                        self._hideSuggestions();\n                    }\n                }\n            });\n        },\n\n        _getTimeSinceLastQuery: function() {\n            var now = new Date();\n            return now.getTime() - this.timeOfLastQuery;\n        },\n\n        _waitForRequestTime: function() {\n            var self = this;\n            if (!this.queuedRequest) {\n                // This should never happen...\n                return;\n            }\n\n            if (this._getTimeSinceLastQuery() > 1000) {\n                this._textTyped();\n                this.queuedRequest = false;\n            } else {\n                setTimeout(function() {\n                    self._waitForRequestTime();\n                }, 300);\n            }\n        },\n\n        /*\n         * Called each time a new character is typed\n         * strips white spaces, and calls for a request if needed\n         */\n        _textTyped: function(key) {\n\n            var self = this;\n            var text = trim(this.get());\n\n            if (text.length > 1) {\n\n                // if we're not already querying and enough time has passed\n                // since the last request\n                if (!this.querying && this._getTimeSinceLastQuery() > 1000) {\n                    this._retrieveOptions(text);\n                } else if (!this.queuedRequest) {\n                    // otherwise, if we can't do a request right now\n                    // and no other request is queued\n                    this.queuedRequest = true;\n\n                    setTimeout(function() {\n                        self._waitForRequestTime();\n                    }, 300);\n                }\n            } else if (this.suggestionBox) {\n                this._hideSuggestions();\n            }\n        },\n\n        _openSelection: function(event) {\n            if (this.selectorPos >= 0) {\n                window.location = this.suggestions[this.selectorPos].url;\n                return false;\n            }\n            return true;\n        },\n\n        /*\n         * Move the selector (gray area) up or down\n         */\n        _moveSelector: function(direction) {\n\n            if (this.suggestionBox) {\n                var suggNum = this.suggestionList.length.get();\n\n                if (this.selectorPos < 0) {\n                    this.selectorPos = direction == 'down' ? 0 : suggNum - 1;\n                } else {\n                    this._clearSelector();\n                    this.selectorPos += direction == 'up' ? -1 : 1;\n\n                    if (this.selectorPos >= suggNum) {\n                        this.selectorPos = -1;\n                    } else if (this.selectorPos < 0) {\n                        this.selectorPos = -1;\n                    }\n                }\n            }\n\n            this._setSelector();\n        },\n\n        _setSelector: function() {\n            if (this.selectorPos >= 0) {\n                this.suggestionList.item(this.selectorPos).dom.className = 'selected';\n            }\n        },\n\n        _clearSelector: function() {\n            if (this.selectorPos >= 0) {\n                this.suggestionList.item(this.selectorPos).dom.className = '';\n            }\n        },\n\n        isAnyItemSelected: function() {\n            return this.selectorPos > 0;\n        }\n\n    }, function(args, container, searchUrl) {\n        args.autocomplete = 'off';\n        this.RealtimeTextBox(args);\n        this.selectorPos = -1;\n        this.querying = false;\n        this.container = container;\n        this.timeOfLastQuery = 0;\n        this.searchUrl = searchUrl;\n\n        var self = this;\n\n        this.observe(function(key, event) {\n            self._textTyped(key);\n            return true;\n        });\n\n        this.observeOtherKeys(function(text, key, event) {\n            if (key == 38 || key == 40) {\n                self._moveSelector(key == 38 ? 'up' : 'down');\n                return false;\n            } else if (key == 27) {\n                self._hideSuggestions();\n                return false;\n            } else if (key == 13) {\n                return self._openSelection(event);\n            } else {\n                return true;\n            }\n        });\n\n        $E(document.body).observeClick(function(event) {\n            // Close box if a click is done outside of it\n\n            /* for some unknown reason, onclick is called on the submit button,\n             * as soon as the return key is pressed in any of the textfields.\n             * To make it even better, onclick is called before onkeyup,\n             * which forces us to do the last two checks.\n             */\n\n            if (self.suggestionBox && !self.suggestionList.ancestorOf($E(eventTarget(event))) && $E(eventTarget(event)) != self.input) {\n                self._hideSuggestions();\n            }\n        });\n    });\n\n\n    $.widget('indico.search_tag', {\n        options: {\n            categ_title: 'Home',\n            everywhere: true,\n            search_category_url: '#',\n            search_url: '#',\n            form: null\n        },\n\n        _transition: function(title, no_check) {\n            var $tag = this.$tag;\n            var old_width = $tag.width();\n\n            $tag.fadeTo('fast', 0.3).width('').find('.where').html(title);\n            var new_width = $tag.width();\n\n            // store target width\n            $tag.fadeTo('fast', 0.5).width(old_width).data('target-width', new_width);\n\n            $tag.animate({\n                width: ((new_width < old_width) && !no_check) ? old_width : new_width\n            }, 200, 'linear');\n\n        },\n\n        _create: function() {\n            var self = this;\n\n            var tag_template = _.template('<div class=\"search-tag\">' +\n            '<div class=\"cross\">x</div>' +\n            '<div class=\"where\"><%= categ_title %></div>' +\n            '</div>');\n\n            var $tag = this.$tag = $(tag_template({\n                categ_title: this.options.everywhere ? $t.gettext('Everywhere') : this.options.categ_title\n            }));\n\n            $(this.element).replaceWith($tag);\n            var $where = $('.where', $tag);\n\n            if (this.options.everywhere) {\n                $tag.addClass('everywhere');\n                $('.cross', this.$tag).hide();\n            } else {\n                $tag.addClass('in-category');\n                $('.cross', this.$tag).show();\n            }\n\n            $('.cross', $tag).on('click', function() {\n                self.search_everywhere();\n            });\n\n            var $parent = $tag.parent();\n\n            $parent.on('mouseenter', '.search-tag.everywhere', function() {\n                self.show_categ();\n            });\n            $parent.on('mouseover', '.search-tag.everywhere', function(e) {\n                self.show_tip(e);\n            });\n            $parent.on('mouseleave', '.search-tag.everywhere', function() {\n                $where.removeData('hasFocus');\n            });\n            $parent.on('click', '.search-tag.in-category-over', function() {\n                self.confirm_tip();\n            });\n            $parent.on('mouseleave', '.search-tag.in-category-over', function() {\n                self.back_to_everywhere();\n            });\n        },\n\n        confirm_tip: function() {\n            var $where = $('.where', this.$tag);\n            var $tag = this.$tag;\n\n            $tag.qtip('destroy');\n            $where.fadeOut('fast', function() {\n                $(this).fadeIn('fast');\n            });\n\n            this.$tag.addClass('in-category').removeClass('everywhere').removeClass('in-category-over');\n            this.options.form.attr('action', this.options.search_category_url);\n\n            // use target-width as search-tag may still be growing\n            $tag.animate({\n                width: $tag.data('target-width') + $('.cross', $tag).width() + 10\n            }, 200, 'swing', function() {\n                $('.cross', $tag).fadeIn('fast');\n            });\n        },\n\n        search_everywhere: function() {\n            $('.cross', this.$tag).hide();\n            this.$tag.addClass('everywhere').removeClass('in-category');\n            this._transition($t.gettext('Everywhere'), true);\n            this.options.form.attr('action', this.options.search_url);\n        },\n\n        show_categ: function() {\n            var $tag = this.$tag;\n            var $where = $('.where', $tag);\n            var self = this;\n            $where.data('hasFocus', true);\n            setTimeout(function() {\n                if ($where.data('hasFocus')) {\n                    self._transition(self.options.categ_title);\n                    $tag.addClass('in-category-over');\n                }\n            }, 200);\n        },\n\n        show_tip: function(event) {\n            this.$tag.qtip({\n                content: format($t.gettext('Click to search inside <span class=\"label\">{title}</span>'), {title: this.options.categ_title}),\n                position: {\n                    at: 'bottom center',\n                    my: 'top center'\n                },\n                show: {\n                    event: event.type,\n                    ready: true\n                }\n            }, event);\n        },\n\n        back_to_everywhere: function() {\n            var $where = $('.where', this.$tag);\n            var self = this;\n\n            this.$tag.removeClass('in-category-over');\n            $where.removeData('hasFocus');\n            setTimeout(function() {\n                if (!$where.data('hasFocus')) {\n                    self._transition($t.gettext('Everywhere'), true);\n                    self.$tag.addClass('everywhere');\n                }\n            }, 200);\n        }\n    });\n\n\n    global.categorySearchBox = function categorySearchBox(options) {\n        // expected options: categoryNamesUrl, searchUrl, searchCategoryUrl, categoryName, isRoot\n        var form = $('#category-search-form');\n        var extra = form.find('.extra-options');\n        var controls = form.find('.search-controls');\n        var extraConfigured = false;\n        $('#category-search-expand').on('click', function() {\n            if (extra.is(':visible')) {\n                extra.slideUp('fast');\n            } else {\n                extra.slideDown('fast');\n                if (!extraConfigured) {\n                    extraConfigured = true;\n                    extra.css('display', 'table').position({\n                        of: controls,\n                        my: 'right top',\n                        at: 'right bottom'\n                    });\n                }\n            }\n        });\n\n        function verifyForm() {\n            var startDate = $('#search-start_date').val();\n            var endDate = $('#search-end_date').val();\n            return (!startDate || Util.parseDateTime(startDate, IndicoDateTimeFormats.DefaultHourless)) &&\n                    (!endDate || Util.parseDateTime(endDate, IndicoDateTimeFormats.DefaultHourless));\n        }\n\n        var intelligentSearchBox = new IntelligentSearchBox({\n            name: 'search-phrase',\n            id: 'search-phrase',\n            style: {backgroundColor: 'transparent', outline: 'none'}\n        }, $E('category-search-box'), options.categoryNamesUrl);\n\n        $('#search-start_date, #search-end_date').datepicker();\n        $E('search-phrase').replaceWith(intelligentSearchBox.draw());\n\n        $('.search-button').on('click', function() {\n            if (verifyForm()) {\n                $('#category-search-form').submit();\n            }\n        });\n\n        $('#search-phrase').on('keypress', function(e) {\n            if (e.which == 13 && !intelligentSearchBox.isAnyItemSelected()) {\n                if (verifyForm()) {\n                    $('#category-search-form').submit();\n                }\n            }\n        });\n\n        if (!options.isRoot) {\n            $('#category-search-form .search-button').before($('<div class=\"search-tag\">'));\n            $('.search-tag').search_tag({\n                everywhere: true,\n                categ_title: options.categoryName,\n                form: $('#category-search-form'),\n                search_url: options.searchUrl,\n                search_category_url: options.searchCategoryUrl\n            });\n        }\n    }\n})(window);\n","// removed by extract-text-webpack-plugin"],"sourceRoot":""}